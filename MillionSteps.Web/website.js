// Generated by IcedCoffeeScript 108.0.9
(function() {
  define(['ajax', 'xhr'], function(ajax, xhr) {
    var website;
    website = {
      choicesSectionSelector: 'section.choices',
      choicesFormSelector: 'section.choices form',
      xhr: xhr,
      handleChoiceResponse: function(response) {
        var newChoicesSection, newUrl;
        newUrl = website.xhr.fromLastCall.responseURL;
        history.replaceState({}, '', newUrl);
        newChoicesSection = $(response).find(website.choicesSectionSelector);
        return $(website.choicesSectionSelector).replaceWith(newChoicesSection);
      },
      handleAjaxError: function() {
        return alert('Ajax error');
      }
    };
    ajax.setupLiveForm(website.choicesFormSelector, website.handleChoiceResponse, website.handleAjaxError);
    return website;
  });

}).call(this);
